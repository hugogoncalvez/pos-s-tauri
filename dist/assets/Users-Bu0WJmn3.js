import{r as l,z as F,E as _,F as W,_ as T,a6 as fe,H as g,ae as Me,j as e,J as A,K as M,N as L,P as ne,a8 as Ee,ay as Ge,az as $e,d as le,ad as he,aA as Ne,L as Y,O as ze,ag as Be,aB as De,W as Fe,X as _e,U as ee,f as ge,a1 as Te,D as be,T as U,g as ve,C as Le,s as ie,B as z,aa as qe,k as Ce,a2 as Oe,a as Ve,b as We,e as He,u as Ke,y as Qe,I,G as P,l as re,h as N,i as J,p as X,S as Je,q as Xe}from"./index-C4A7YWMW.js";import{E as Ze}from"./EnhancedTable-BX9li6wm.js";import{u as je}from"./useDelete-DGUJ3i20.js";import{c as Ye}from"./ConfirmDelete-Bi1GYp2I.js";import{C as eo}from"./Collapse-Bux-DzTz.js";import{T as D}from"./Tooltip-DOLZfSzw.js";import{S as oo,F as te}from"./FormControlLabel-uRoXpuuy.js";import{E as so}from"./Edit-B8GMNmyj.js";import{D as ro,A as to}from"./Delete-BbxDntt0.js";import{A as ue}from"./Autocomplete-okLxTLSl.js";import"./TableRow-BsCYnncP.js";import"./TableBody-Bv-WiDt9.js";import"./Popper-ijWchD3c.js";import"./Stack-DYQPukkq.js";import"./useThemeProps-D8tK1Axd.js";import"./Chip-Bc7mlkaj.js";const ye=l.createContext({});function ao(o){return _("MuiAccordion",o)}const Z=F("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),no=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],io=o=>{const{classes:s,square:r,expanded:a,disabled:d,disableGutters:x}=o;return L({root:["root",!r&&"rounded",a&&"expanded",d&&"disabled",!x&&"gutters"],region:["region"]},ao,s)},lo=A(ne,{name:"MuiAccordion",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:r}=o;return[{[`& .${Z.region}`]:s.region},s.root,!r.square&&s.rounded,!r.disableGutters&&s.gutters]}})(({theme:o})=>{const s={duration:o.transitions.duration.shortest};return{position:"relative",transition:o.transitions.create(["margin"],s),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(o.vars||o).palette.divider,transition:o.transitions.create(["opacity","background-color"],s)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Z.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Z.disabled}`]:{backgroundColor:(o.vars||o).palette.action.disabledBackground}}},({theme:o})=>({variants:[{props:s=>!s.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(o.vars||o).shape.borderRadius,borderTopRightRadius:(o.vars||o).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(o.vars||o).shape.borderRadius,borderBottomRightRadius:(o.vars||o).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:s=>!s.disableGutters,style:{[`&.${Z.expanded}`]:{margin:"16px 0"}}}]})),co=l.forwardRef(function(s,r){const a=W({props:s,name:"MuiAccordion"}),{children:d,className:x,defaultExpanded:c=!1,disabled:h=!1,disableGutters:p=!1,expanded:f,onChange:b,square:y=!1,slots:v={},slotProps:k={},TransitionComponent:R,TransitionProps:C}=a,u=T(a,no),[n,i]=fe({controlled:f,default:c,name:"Accordion",state:"expanded"}),j=l.useCallback(O=>{i(!n),b&&b(O,!n)},[n,b,i]),[S,...w]=l.Children.toArray(d),oe=l.useMemo(()=>({expanded:n,disabled:h,disableGutters:p,toggle:j}),[n,h,p,j]),q=g({},a,{square:y,disabled:h,disableGutters:p,expanded:n}),E=io(q),G=g({transition:R},v),H=g({transition:C},k),[K,Q]=Me("transition",{elementType:eo,externalForwardedProps:{slots:G,slotProps:H},ownerState:q});return e.jsxs(lo,g({className:M(E.root,x),ref:r,ownerState:q,square:y},u,{children:[e.jsx(ye.Provider,{value:oe,children:S}),e.jsx(K,g({in:n,timeout:"auto"},Q,{children:e.jsx("div",{"aria-labelledby":S.props.id,id:S.props["aria-controls"],role:"region",className:E.region,children:w})}))]}))});function uo(o){return _("MuiAccordionDetails",o)}F("MuiAccordionDetails",["root"]);const po=["className"],mo=o=>{const{classes:s}=o;return L({root:["root"]},uo,s)},xo=A("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(o,s)=>s.root})(({theme:o})=>({padding:o.spacing(1,2,2)})),fo=l.forwardRef(function(s,r){const a=W({props:s,name:"MuiAccordionDetails"}),{className:d}=a,x=T(a,po),c=a,h=mo(c);return e.jsx(xo,g({className:M(h.root,d),ref:r,ownerState:c},x))});function ho(o){return _("MuiAccordionSummary",o)}const B=F("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),go=["children","className","expandIcon","focusVisibleClassName","onClick"],bo=o=>{const{classes:s,expanded:r,disabled:a,disableGutters:d}=o;return L({root:["root",r&&"expanded",a&&"disabled",!d&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!d&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},ho,s)},vo=A(Ee,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(o,s)=>s.root})(({theme:o})=>{const s={duration:o.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:o.spacing(0,2),transition:o.transitions.create(["min-height","background-color"],s),[`&.${B.focusVisible}`]:{backgroundColor:(o.vars||o).palette.action.focus},[`&.${B.disabled}`]:{opacity:(o.vars||o).palette.action.disabledOpacity},[`&:hover:not(.${B.disabled})`]:{cursor:"pointer"},variants:[{props:r=>!r.disableGutters,style:{[`&.${B.expanded}`]:{minHeight:64}}}]}}),Co=A("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(o,s)=>s.content})(({theme:o})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:s=>!s.disableGutters,style:{transition:o.transitions.create(["margin"],{duration:o.transitions.duration.shortest}),[`&.${B.expanded}`]:{margin:"20px 0"}}}]})),jo=A("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(o,s)=>s.expandIconWrapper})(({theme:o})=>({display:"flex",color:(o.vars||o).palette.action.active,transform:"rotate(0deg)",transition:o.transitions.create("transform",{duration:o.transitions.duration.shortest}),[`&.${B.expanded}`]:{transform:"rotate(180deg)"}})),yo=l.forwardRef(function(s,r){const a=W({props:s,name:"MuiAccordionSummary"}),{children:d,className:x,expandIcon:c,focusVisibleClassName:h,onClick:p}=a,f=T(a,go),{disabled:b=!1,disableGutters:y,expanded:v,toggle:k}=l.useContext(ye),R=n=>{k&&k(n),p&&p(n)},C=g({},a,{expanded:v,disabled:b,disableGutters:y}),u=bo(C);return e.jsxs(vo,g({focusRipple:!1,disableRipple:!0,disabled:b,component:"div","aria-expanded":v,className:M(u.root,x),focusVisibleClassName:M(u.focusVisible,h),onClick:R,ref:r,ownerState:C},f,{children:[e.jsx(Co,{className:u.content,ownerState:C,children:d}),c&&e.jsx(jo,{className:u.expandIconWrapper,ownerState:C,children:c})]}))});function Ro(o){return _("MuiFormGroup",o)}F("MuiFormGroup",["root","row","error"]);const ko=["className","row"],So=o=>{const{classes:s,row:r,error:a}=o;return L({root:["root",r&&"row",a&&"error"]},Ro,s)},Po=A("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:r}=o;return[s.root,r.row&&s.row]}})(({ownerState:o})=>g({display:"flex",flexDirection:"column",flexWrap:"wrap"},o.row&&{flexDirection:"row"})),Ao=l.forwardRef(function(s,r){const a=W({props:s,name:"MuiFormGroup"}),{className:d,row:x=!1}=a,c=T(a,ko),h=Ge(),p=$e({props:a,muiFormControl:h,states:["error"]}),f=g({},a,{row:x,error:p.error}),b=So(f);return e.jsx(Po,g({className:M(b.root,d),ownerState:f,ref:r},c))}),wo=le(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Io=le(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Uo=A("span",{shouldForwardProp:he})({position:"relative",display:"flex"}),Mo=A(wo)({transform:"scale(1)"}),Eo=A(Io)(({theme:o,ownerState:s})=>g({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest})},s.checked&&{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}));function Re(o){const{checked:s=!1,classes:r={},fontSize:a}=o,d=g({},o,{checked:s});return e.jsxs(Uo,{className:r.root,ownerState:d,children:[e.jsx(Mo,{fontSize:a,className:r.background,ownerState:d}),e.jsx(Eo,{fontSize:a,className:r.dot,ownerState:d})]})}const ke=l.createContext(void 0);function Go(){return l.useContext(ke)}function $o(o){return _("MuiRadio",o)}const pe=F("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),No=["checked","checkedIcon","color","icon","name","onChange","size","className"],zo=o=>{const{classes:s,color:r,size:a}=o,d={root:["root",`color${Y(r)}`,a!=="medium"&&`size${Y(a)}`]};return g({},s,L(d,$o,s))},Bo=A(oo,{shouldForwardProp:o=>he(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:r}=o;return[s.root,r.size!=="medium"&&s[`size${Y(r.size)}`],s[`color${Y(r.color)}`]]}})(({theme:o,ownerState:s})=>g({color:(o.vars||o).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:o.vars?`rgba(${s.color==="default"?o.vars.palette.action.activeChannel:o.vars.palette[s.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:ze(s.color==="default"?o.palette.action.active:o.palette[s.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${pe.checked}`]:{color:(o.vars||o).palette[s.color].main}},{[`&.${pe.disabled}`]:{color:(o.vars||o).palette.action.disabled}}));function Do(o,s){return typeof s=="object"&&s!==null?o===s:String(o)===String(s)}const me=e.jsx(Re,{checked:!0}),xe=e.jsx(Re,{}),ae=l.forwardRef(function(s,r){var a,d;const x=W({props:s,name:"MuiRadio"}),{checked:c,checkedIcon:h=me,color:p="primary",icon:f=xe,name:b,onChange:y,size:v="medium",className:k}=x,R=T(x,No),C=g({},x,{color:p,size:v}),u=zo(C),n=Go();let i=c;const j=Ne(y,n&&n.onChange);let S=b;return n&&(typeof i>"u"&&(i=Do(n.value,x.value)),typeof S>"u"&&(S=n.name)),e.jsx(Bo,g({type:"radio",icon:l.cloneElement(f,{fontSize:(a=xe.props.fontSize)!=null?a:v}),checkedIcon:l.cloneElement(h,{fontSize:(d=me.props.fontSize)!=null?d:v}),ownerState:C,classes:u,name:S,checked:i,onChange:j,ref:r,className:M(u.root,k)},R))});function Fo(o){return _("MuiRadioGroup",o)}F("MuiRadioGroup",["root","row","error"]);const _o=["actions","children","className","defaultValue","name","onChange","value"],To=o=>{const{classes:s,row:r,error:a}=o;return L({root:["root",r&&"row",a&&"error"]},Fo,s)},Lo=l.forwardRef(function(s,r){const{actions:a,children:d,className:x,defaultValue:c,name:h,onChange:p,value:f}=s,b=T(s,_o),y=l.useRef(null),v=To(s),[k,R]=fe({controlled:f,default:c,name:"RadioGroup"});l.useImperativeHandle(a,()=>({focus:()=>{let i=y.current.querySelector("input:not(:disabled):checked");i||(i=y.current.querySelector("input:not(:disabled)")),i&&i.focus()}}),[]);const C=Be(r,y),u=De(h),n=l.useMemo(()=>({name:u,onChange(i){R(i.target.value),p&&p(i,i.target.value)},value:k}),[u,p,R,k]);return e.jsx(ke.Provider,{value:n,children:e.jsx(Ao,g({role:"radiogroup",ref:C,className:M(v.root,x)},b,{children:d}))})}),qo=le(e.jsx("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"VpnKey");var ce={},Oo=Fe;Object.defineProperty(ce,"__esModule",{value:!0});var Se=ce.default=void 0,Vo=Oo(_e()),Wo=e;Se=ce.default=(0,Vo.default)((0,Wo.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Ho=({open:o,onClose:s,user:r})=>{const{data:a,isLoading:d,isError:x}=ee("allPermissions","/permissions"),{data:c,isLoading:h,isError:p,refetch:f}=ee(["userPermissions",r==null?void 0:r.id],`/users/${r==null?void 0:r.id}/permissions`,!!(r!=null&&r.id)),b=ge("addUserPermission"),y=je("removeUserPermission"),v=l.useMemo(()=>{if(!a)return{};const u=a.reduce((n,i)=>{const j=i.modulo||"General";return n[j]||(n[j]=[]),n[j].push(i),n},{});return Object.keys(u).sort().reduce((n,i)=>(n[i]=u[i],n),{})},[a]),k=u=>{var j,S;const n=(j=c==null?void 0:c.userOverrides)==null?void 0:j.find(w=>w.permission_id===u);return n?n.type:((S=c==null?void 0:c.rolePermissions)==null?void 0:S.some(w=>w.id===u))?"inherited":"default"},R=async(u,n)=>{n==="grant"||n==="revoke"?await b.mutateAsync({url:`/users/${r.id}/permissions`,values:{permission_id:u,type:n}}):await y.mutateAsync({url:`/users/${r.id}/permissions/${u}`}),f()};if(!r)return null;const C=d||h;return e.jsxs(Te,{open:o,onClose:s,fullWidth:!0,maxWidth:"md",children:[e.jsxs(be,{children:["Gestionar Permisos para ",e.jsx(U,{component:"span",color:"primary",variant:"h6",children:r.nombre}),e.jsxs(U,{variant:"body2",color:"textSecondary",children:["Rol: ",r.rol.nombre]})]}),e.jsxs(ve,{dividers:!0,children:[C&&e.jsx(Le,{}),x&&e.jsx(ie,{severity:"error",children:"Error al cargar la lista de permisos."}),p&&e.jsx(ie,{severity:"error",children:"Error al cargar los permisos del usuario."}),!C&&!x&&Object.entries(v).map(([u,n])=>e.jsxs(co,{defaultExpanded:!0,children:[e.jsx(yo,{expandIcon:e.jsx(Se,{}),children:e.jsx(U,{variant:"h6",children:u})}),e.jsx(fo,{sx:{display:"flex",flexDirection:"column",gap:2},children:n.map(i=>{const j=k(i.id);return e.jsxs(z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"divider",pb:1},children:[e.jsxs(z,{children:[e.jsx(U,{children:i.nombre}),e.jsx(U,{variant:"caption",color:"textSecondary",children:i.descripcion})]}),e.jsx(qe,{component:"fieldset",children:e.jsxs(Lo,{row:!0,value:j,onChange:S=>R(i.id,S.target.value),children:[e.jsx(D,{title:"El permiso es otorgado por el rol del usuario. Para anularlo, selecciona 'Conceder' o 'Revocar'.",children:e.jsx("span",{children:e.jsx(te,{value:"inherited",control:e.jsx(ae,{}),label:"Heredado",disabled:j!=="inherited"})})}),e.jsx(D,{title:"Otorga este permiso al usuario, incluso si su rol no lo tiene.",children:e.jsx(te,{value:"grant",control:e.jsx(ae,{}),label:"Conceder"})}),e.jsx(D,{title:"Revoca este permiso al usuario, incluso si su rol lo tiene.",children:e.jsx(te,{value:"revoke",control:e.jsx(ae,{}),label:"Revocar"})})]})})]},i.id)})})]},u))]}),e.jsx(Ce,{children:e.jsx(Oe,{onClick:s,variant:"contained",children:"Cerrar"})})]})},ds=()=>{const o=Ve(),s=We(o.breakpoints.down("sm")),[r,a]=l.useState(!1),[d,x]=l.useState(!1),[c,h]=l.useState(null),[p,f,b,,y]=He(),[v,k]=l.useState(""),[R,C]=l.useState(0),[u,n]=l.useState(5),{tienePermiso:i}=Ke(),{data:j,isLoading:S}=ee("roles","/roles"),{data:w,isLoading:oe,isError:q,error:E,refetch:G}=ee("users","/users"),H=ge("addUser"),K=Qe("updateUser"),Q=je("deleteUser"),O=l.useCallback((t=null)=>{h(t);const m={nombre:(t==null?void 0:t.nombre)||"",username:(t==null?void 0:t.username)||"",password:"",roleId:(t==null?void 0:t.rol_id)||"",activo:t?String(t.activo):"true"};y(m),a(!0)},[y]),V=l.useCallback(()=>{a(!1),h(null),b()},[b]),Pe=l.useCallback(t=>{h(t),x(!0)},[]),Ae=l.useCallback(()=>{x(!1),h(null)},[]),we=l.useCallback(async t=>{t.preventDefault();const m={...p,activo:p.activo==="true"};c&&!m.password&&delete m.password;try{c?await K.mutateAsync({url:`/users/${c.id}`,datos:m}):await H.mutateAsync({url:"/users",values:m}),G(),V()}catch($){console.error("Error submitting user:",$)}},[c,p,H,K,G,V]),de=l.useCallback(async t=>{if((await Ye()).isConfirmed)try{await Q.mutateAsync({url:`/users/${t}`}),G()}catch($){console.error("Error deleting user:",$)}},[Q,G]),se=l.useMemo(()=>Array.isArray(w)?w.filter(t=>{var m,$;return(((m=t.username)==null?void 0:m.toLowerCase())||"").includes(v.toLowerCase())||((($=t.nombre)==null?void 0:$.toLowerCase())||"").includes(v.toLowerCase())}):[],[w,v]),Ie=l.useMemo(()=>se.slice(R*u,R*u+u),[se,R,u]),Ue=l.useMemo(()=>[{id:"nombre",label:"Nombre"},{id:"username",label:"Usuario"},{id:"rol",label:"Rol",valueGetter:({row:t})=>{var m;return((m=t.rol)==null?void 0:m.nombre)||"N/A"}},{id:"activo",label:"Activo",valueGetter:({row:t})=>t.activo?"Sí":"No"},{id:"actions",label:"Acciones",valueGetter:({row:t})=>e.jsxs(z,{children:[i("editar_usuario")&&e.jsx(D,{title:"Editar Usuario",children:e.jsx(I,{onClick:()=>O(t),size:"small",color:"primary",children:e.jsx(so,{})})}),i("eliminar_usuario")&&e.jsx(D,{title:"Eliminar Usuario",children:e.jsx(I,{onClick:()=>de(t.id),size:"small",color:"error",children:e.jsx(ro,{})})}),i("gestionar_roles")&&e.jsx(D,{title:"Gestionar Permisos",children:e.jsx(I,{onClick:()=>Pe(t),size:"small",color:"secondary",children:e.jsx(qo,{})})})]})}],[O,de,i]);return e.jsxs(z,{sx:{p:{xs:1,sm:2,md:3}},children:[e.jsx(ne,{elevation:3,sx:{p:{xs:2,sm:3},mb:3,background:t=>t.palette.background.componentHeaderBackground,color:o.palette.primary.contrastText},children:e.jsxs(P,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsxs(P,{item:!0,children:[e.jsx(U,{variant:s?"h5":"h4",gutterBottom:!0,children:"Gestión de Usuarios"}),e.jsx(U,{variant:"body1",sx:{opacity:.9},children:"Crea, edita y gestiona los usuarios y sus roles en el sistema."})]}),e.jsx(P,{item:!0,children:i("crear_usuario")&&e.jsx(re,{variant:"outlined",color:"primary",startIcon:e.jsx(to,{}),onClick:()=>O(),children:"Nuevo Usuario"})})]})}),e.jsxs(ne,{elevation:3,sx:{p:{xs:1,sm:2},mb:3},children:[e.jsx(z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:1,children:e.jsx(U,{variant:"h5",children:"Usuarios"})}),e.jsx(P,{container:!0,justifyContent:"center",sx:{mb:2},children:e.jsxs(P,{item:!0,xs:12,sm:8,md:6,lg:4,children:[" ",e.jsx(N,{label:"Buscar por nombre o usuario",value:v,onChange:t=>k(t.target.value),fullWidth:!0,InputProps:{startAdornment:e.jsx(J,{position:"start",children:e.jsx(I,{onClick:()=>k(""),size:"small",children:e.jsx(X,{fontSize:"small",color:"error"})})})}})]})}),q&&e.jsxs(ie,{severity:"error",sx:{mb:2},children:["Error al cargar usuarios: ",(E==null?void 0:E.message)||"Error desconocido"]}),e.jsx(Ze,{columns:Ue,data:Ie,loading:oe,count:se.length,page:R,rowsPerPage:u,onPageChange:(t,m)=>C(m),onRowsPerPageChange:t=>{n(parseInt(t.target.value,10)),C(0)}})]}),e.jsxs(Je,{open:r,onClose:V,fullWidth:!0,maxWidth:"sm",children:[e.jsxs(be,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"background.dialog",color:"text.primary"},children:[c?"Editar Usuario":"Crear Usuario",e.jsx(I,{onClick:V,children:e.jsx(Xe,{color:"error"})})]}),e.jsxs(z,{component:"form",onSubmit:we,children:[e.jsx(ve,{sx:{backgroundColor:"background.dialog"},children:e.jsxs(P,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(P,{item:!0,xs:12,children:e.jsx(N,{fullWidth:!0,required:!0,id:"nombre",label:"Nombre Completo",name:"nombre",value:p.nombre||"",onChange:f,autoFocus:!0,InputProps:{startAdornment:e.jsx(J,{position:"start",children:e.jsx(I,{size:"small",onClick:()=>f({target:{name:"nombre",value:""}}),children:e.jsx(X,{fontSize:"small",color:"error"})})})}})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(N,{fullWidth:!0,required:!0,id:"username",label:"Nombre de Usuario",name:"username",value:p.username||"",onChange:f,InputProps:{startAdornment:e.jsx(J,{position:"start",children:e.jsx(I,{size:"small",onClick:()=>f({target:{name:"username",value:""}}),children:e.jsx(X,{fontSize:"small",color:"error"})})})}})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(N,{fullWidth:!0,required:!c,name:"password",label:"Contraseña",type:"password",id:"password",value:p.password||"",onChange:f,helperText:c?"Dejar en blanco para no cambiar":"",autoComplete:"new-password",InputProps:{startAdornment:e.jsx(J,{position:"start",children:e.jsx(I,{size:"small",onClick:()=>f({target:{name:"password",value:""}}),children:e.jsx(X,{fontSize:"small",color:"error"})})})}})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(ue,{options:j||[],getOptionLabel:t=>t.nombre||"",value:(j||[]).find(t=>t.id===p.roleId)||null,onChange:(t,m)=>{f({target:{name:"roleId",value:m?m.id:""}})},isOptionEqualToValue:(t,m)=>t.id===m.id,renderInput:t=>e.jsx(N,{...t,label:"Rol",required:!0}),disablePortal:!0})}),e.jsx(P,{item:!0,xs:12,children:e.jsx(ue,{options:[{value:"true",label:"Activo"},{value:"false",label:"Inactivo"}],getOptionLabel:t=>t.label,value:p.activo==="true"?{value:"true",label:"Activo"}:{value:"false",label:"Inactivo"},onChange:(t,m)=>{f({target:{name:"activo",value:m?m.value:"true"}})},isOptionEqualToValue:(t,m)=>t.value===m.value,renderInput:t=>e.jsx(N,{...t,label:"Estado",required:!0}),disablePortal:!0})})]})}),e.jsxs(Ce,{sx:{p:2,backgroundColor:"background.dialog"},children:[e.jsx(re,{onClick:V,variant:"outlined",color:"secondary",sx:{padding:"2px 12px"},children:"Cancelar"}),e.jsx(re,{type:"submit",variant:"contained",children:c?"Actualizar":"Crear"})]})]})]}),d&&c&&e.jsx(Ho,{open:d,onClose:Ae,user:c})]})};export{ds as default};
